Описание макро-вставок шаблонов.

[table_name] - имя таблицы
[webform_version] - версия генератора кода
[include:template_filepath] - вставить другой шаблон (с последуюшим парсингом)
[param:name] - вставить параметр "name" из индивидуальной конфигурации текущего шаблона (определяется в makescript.json для каждого шаблона)
[tune:name] - вставить параметр "name" из индивидуальной конфигурации текущей таблицы (определяется в tablename_tunes.json).
[pk] - сокращенный вариант вставки поля-первичного ключа, вставляется только первое поле (т.е. не работает с составными ключами), хороший вариант, когда PK используется в системе контроля доступа и он всегда представлен одним полем. Если полей больше чем одно или нет вообще - будет генерироваться ошибка.


<AL>...[V]...</AL> - Вертикальное выравнивание блока по меткам [V] (добить пробелами так, что бы это место было друг над другом). С табуляцией пока не дружим, превращаем в 4  пробела

<IF expression>...[ELSE]...</IF> - проверяет условие и вставляет блок если есть хотя бы одно поле удовлетворяющее всем заданным атрибутам
<IFF expression>...[ELSE]...</IFF> - то же что и IF, но работает только внутри развертки полей (макросы <FL>), условие срабавтывает если текущее обрабатываемое поле 
удовлетворяет всем заданным атрибутам
expression:			- набор аттрибутов определяющих условия (если несколько, то совпасть должны все)
	EQ="FieldName"  - соответствие заданному имени поля в таблице 
	FE="FieldName"  - тоже самое что EQ (от Field Exists)
	FL="N" 			- флаг поля. если перечислено несколько флагов, то обязательно совпадение всех 
	FC="{param} -gt 1024"	- посчитать условие с параметром param, поддерживаются -gt, -lt, -eq, -ne, -qe, -le, скобки, арифметика, ..., (работает только внутри <FL> блока). Пример:
			FC="{9} -gt 32" - размер поля > 32 , 
			FC='{3} -eq "String"' - тип поля совместим со String , 
			FC='{0} -eq "fl_deleted"' - полный аналог EQ="fl_deleted", т.е. соответствие имени поля
	NULLABLE="true"	- сравнение со свойством поля Nullable (т.е. может ли иметь пустое значение)
[ELSE]				- сокращенный разделитель ветвления, до [ELSE] работает если expression = true, после [ELSE] если expression = false
<ELIF expression>...[ELSE]...</ELIF> - продолжает предыдущее условение в режиме else if, цепочка else выполняется только в пределах того же блока FL что и первый IF
<ELIFF expression>...[ELSE]...</ELIFF> - тоже, но для IFF-блоков
замечание: вложенность тэга (IF внутри IF) не поддерживается

<CALC>2^4</CALC> - посчитать PowerShell-выражение (Invoke-Expression), можно использовать внутри <FL>-блоков, соотв. используя атрибуты полей.

<FL params>строка_формата<DL params>строка_разделителя</DL></FL> - формирует список полей таблицы по заданному формату. FL могут быть вложенные, соотв. сначала обрабатываются внутренние

В формат подставляются данные о текущем поле:
{0} или {name}	- field name
{1} или {desc}	- field title (description or name if null one)
{2} или {sql}	- SQL data type with size/scale/precision (varchar(64))
{3} или {c} 	- C data type string
{4} или {cn}	- Nullable C data type string
{5} или {ft}	- Lookup Table
{6} или {fk}	- Lookup table key field
{7} или {num}	- Field number
{8} или {refpk}	- Referenced table primary key (for R filter)
{9} или {size}	- Data size (Max input length of form elements)

params:

Types 		- Отобрать поля соответствующие маске флагов (типов), в которой большая буква - включить класс полей, маленькая - исключить
		& - флаг для отбора на одновременное совпадение всех условий, иначе любое совпавшее минус запреты. 
???		A - Все поля, кроме скрытых "h", вычисляемых "v" и полей внешних таблиц "r" 
		H - Cкрытые поля (обычно те, которые не передаются в стандартных вызовах, но надо поминить что они могут возвращаться в результатах). Нужно указывать явно.
		P - Primary keys
		L - Lookup fields (Foreign keys)
		T - Recursive tree fields (lookup to self)
		G - Guids
		S - Text/strings fields (char, varchar, ...)
		I - Integer fields (int, bigint)
		N - Numeric fields (Money, Float, ...)
		D - Date|time fields
???		B - Blob fields 
		X - Binary fields (timestamp)
		F - Flags fields (fl_ ...)
		V - вычисляемые поля имен (SelectName). Нужно указывать явно.
		S - поля подходящие для составления SelectName
		R - поля других таблиц ссылающиеся на эту таблицу (заполнятся как обычные Lookup). не имеет смысла использовать R совместно с другими флагами. Нужно указывать явно.
		< - признак продолжения пред.списка, т.е. надо ли вставить разделитель перед первым элементом (потенциально глючная штука, лучше исп. <IFG>)
???	если не указано ни одного разрешающего фильтра (большая буква), то используются "A" (все поля, кроме v,h,r) и потом из него вычитаются указанные запреты. 
	если на одно поле срабатывает несколько фильтров или флагов, то преимущество у запретов
	скрытые типы полей нужно явно включать (H или V) для появления в списке

Like 		- Отобрать поля по похожести имени заданному шаблону
				"*" - все (по-умолчанию)
				"*name" - только те, что заканчиваются на name и т.п.


Примеры:
отобрать все поля, кроме BLOB и binary (а так же скрытых и вычисляемых, т.к. они явно не разрешены). т.к. разделителей нет, слепится все в кучу:
<FL Types="bx">{0}</FL>

отобрать первичные ключи и любые поля с типом дата и сформировать список через запятую:
<FL Types="PD">{0}<DL>, </DL></FL>

отобрать только поля-флаги с типом дата, сделать список через запятую и перенос строки:
<FL Types="&FD">{0}<DL>, 
</DL></FL> 

отобрать поля текстового типа заканчивающиеся на name (Fullname, FirstName и т.п.)
<FL Like="*name" Types="S">{0} </FL>

сформировать список внешних ссылок в виде [локальное поле] => [таблица куда ссылаемся].[поле на которое ссылаемся]
<FL Types="L">{0} => {5}.{6}</FL>

сформировать список ссылок на эту таблицу из других
<FL Types="R">
	Обнаружена внешняя ссылка: {5}.{6} -> [table_name].{0})
</FL> 

